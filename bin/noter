#!/usr/bin/env ruby

require "noter"
require "optparse"

class NoteRunner
  def run(args)
    parser = OptionParser.new do |opts|
      opts.on("-f", "--file FILE", "Create a note using the given file") do |filename|
        Noter::FileMaker.new.make_from_file(filename)
      end

      opts.on("-l", "--one-line", "Show first line of each note file") do
        Noter::Viewer.new.show_first_lines
      end

      opts.on("-n", "--name", "Show first line of each note file, with filename") do
        Noter::Viewer.new.show_first_lines(with_filename: true)
      end

      opts.on("-m", "--message MESSAGE", "Create a note using the given string") do |message|
        Noter::FileMaker.new(message).save_file
      end
    end
    parser.parse!
  end
end

runner = NoteRunner.new
runner.run(ARGV)
